{"version":3,"sources":["TextHighlight.js","InputBlock.js","App.js","reportWebVitals.js","index.js"],"names":["TextHighlight","text","onClick","activeSelection","isSelected","className","id","InputBlock","orginalSrc","HotSpots","selection","data","dataPosition","dataNormal","Object","keys","map","name","slotName","slot","data-position","data-normal","filterKeyPhrases","keyPhrases","bones","forEach","phrase","console","log","length","push","createLinks","inputText","textLines","split","line","keyWord","key","includes","App","useState","setActiveSelection","currentPage","setCurrentPage","setTextToAnylize","PhraseDescription","setPhraseDescription","sources","description","select","src","source","setSource","useEffect","document","title","t","ar","ar-modes","camera-controls","auto-rotate","style","height","width","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d52585b1.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function TextHighlight ({text, onClick, activeSelection}) {\n    const isSelected = text === activeSelection \n    return(\n      <div className=\"highlight\"\n           id={isSelected && \"highlightSelected\"}\n           onClick={() => onClick(text)} \n      >\n        <p>{text}</p>\n      </div>\n  )}","import React from 'react';\nimport './App.css';\nimport TextHighlight from './TextHighlight'\nimport Button from '@material-ui/core/Button';\n\nexport default function InputBlock ({onClick}) {\n    return (\n        <div className=\"inputBoxWrapper\">\n            <h1>Scan.ly</h1>\n            <h3>Upload a file or take a photo to scan your medical report</h3>\n            <div>\n             <TextHighlight\n                text=\"Choose file\"\n                onClick={() => {onClick()}}\n             />\n            <TextHighlight\n                text=\"Take photo\"\n                onClick={() => {onClick()}}\n             />\n             </div>\n        </div>\n    )\n}","import '@google/model-viewer';\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport InputBlock from './InputBlock'\nimport TextHighlight from './TextHighlight'\n\nconst inputText = \"There is normal lumbosacral vertebral body height and alignment on this supine, non-weight bearing exam. Vertebral body marrow signal is normal. The conus medullaris is normal and terminates at L1. T12-L1: Sagittal series-mild secondary discogenic facet change without stenosis. L1-L3: Sagittal series-normal disc spaces with patent canal and foramina. L3-L4: Series 6 image 10-normal disc space show mild/moderate facet arthrosis with patent canal and foramina. L4-L5: Image 21-mild to moderate decreased disc signal and disc height with mild endplate spondylitic change, bulge and a left paracentral disc herniation extruded superiorly, 7 mm AP by 16 mm mL by 14mm CC, with the left L5 nerve root sleeve impingement in the lateral recess, with severe right more than left facet arthrosis. Narrowing of the thecal sac, 8 mm, with mild left lateral recess stenosis, patent right lateral recess and mild to moderate left and mild right foraminal\"\nconst orginalSrc = 'https://cdn.glitch.com/2b03f5e7-2862-4b54-94ff-980cbc384186%2Fspine_default.glb?v=1616274977114'\n\nconst HotSpots = ({selection}) => {\n  const data = {\n    \"T12\": {\n    dataPosition: \"2.363156456501347m 9.321591397198665m 1.4331525282193014m\",\n    dataNormal: \"0.05470006337332172m 0.9984165350372055m 0.013127285753547034m\"\n    },\n    \"L1\": {\n    dataPosition: \"3.295013293203919m 6.789724624383718m 1.8148962866728209m\",\n    dataNormal: \"0.842442998508682m 0.5340302558529746m 0.07142464628759235m\"\n    },\n    \"L3\": {\n    dataPosition: \"3.531537741177914m 5.416282536759944m 1.6646832066721184m\",\n    dataNormal: \"0.27678742621878316m 0.9609307754628429m -0.0008749031726036114m\"\n    },\n    \"L4\": {\n    dataPosition: \"3.56413146810344m 4.059682469893231m 1.6528685590056014m\",\n    dataNormal: \"0.9846680073503973m -0.16847089599446086m 0.04523795423559223m\"\n    },\n    \"L5\": {\n    dataPosition:\"3.154503351205559m 2.7007529194890267m 1.6406301086157387m\",\n  dataNormal: \"0.8911679585711741m -0.45086353050562544m 0.050415736393406484m\"\n    },\n  }\n    const spots = Object.keys(data).map((name) =>{\n      const slotName = \"hotspot-hand\" + name\n      return (\n      <button slot={slotName} className={name === selection ? \"visible\" : null}\n          data-position={data[name].dataPosition}\n          data-normal={data[name].dataNormal}>\n        <div id=\"annotation\">{name}</div>\n      </button>\n    )})  \n\n    return spots\n}\n\nasync function getData(url = \"https://scanly1.cognitiveservices.azure.com/text/analytics/v3.1-preview.1/keyPhrases?showStats=true\", \ndata = {\n    \"documents\": [\n      {\n        \"language\": \"en\",\n        \"id\": \"1\",\n        \"text\": \"FINDINGS: There is normal lumbosacral vertebral body height and alignment on this supine, non-weight bearing exam. Vertebral body marrow signal is normal. The conus medullaris is normal and terminates at L1. T12-L1: Sagittal series-mild secondary discogenic facet change without stenosis. L1-L3: Sagittal series-normal disc spaces with patent canal and foramina. L3-L4: Series 6 image 10-normal disc space show mild/moderate facet arthrosis with patent canal and foramina. L4-L5: Image 21-mild to moderate decreased disc signal and disc height with mild endplate spondylitic change, bulge and a left paracentral disc herniation extruded superiorly, 7 mm AP by 16 mm mL by 14mm CC, with the left L5 nerve root sleeve impingement in the lateral recess, with severe right more than left facet arthrosis. Narrowing of the thecal sac, 8 mm, with mild left lateral recess stenosis, patent right lateral recess and mild to moderate left and mild right foraminal\"\n      }]\n}) {\n  const response = await fetch(url, {\n    method: 'POST', // *GET, POST, PUT, DELETE, etc.\n    mode: 'cors', // no-cors, *cors, same-origin\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n    credentials: 'same-origin', // include, *same-origin, omit\n    headers: {\n      'Content-Type': 'application/json',\n      'Ocp-Apim-Subscription-Key': 'a5bdde0df40b41f58f6fef2d4566c345'\n      // 'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    redirect: 'follow', // manual, *follow, error\n    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n    body: JSON.stringify(data) // body data type must match \"Content-Type\" header\n  });\n  const r = await response.json();\n  return r // parses JSON response into native JavaScript objects\n}\n\nconst filterKeyPhrases = (keyPhrases) => {\n  const keys = [\n    \"mild left lateral recess stenosis\",\n    \"moderate left\",\n    \"disc height\",\n    \"mild right foraminal\",\n    \"left facet arthrosis\",\n    \"Sagittal series-normal disc spaces\",\n    \"left paracentral disc herniation\",\n    \"moderate decreased disc signal\",\n    \"Sagittal series-mild secondary discogenic facet change\",\n     \"moderate facet arthrosis\",\n    \"patent canal\",\n    \"L1-L3\",\n    \"normal lumbosacral vertebral body height\",\n    \"image\",\n    \"L4-L5\",\n    \"T12-L1\",\n    \"L3-L4\",\n    \"left L5 nerve root sleeve impingement\",\n    \"Vertebral body marrow signal\",\n    \"alignment\",\n    \"bulge\",\n    \"supine\",\n    \"non-weight\",\n    \"exam\",\n    \"FINDINGS\",\n    \"CC\",\n    \"conus medullaris\",\n    \"thecal sac\",\n    \"AP\"]\n\n    const bones = ['L1']\n    \n    keys.forEach(phrase => { \n      console.log(phrase)\n      if(phrase.length < 7 && (phrase[2] === '-' || phrase[3] === '-')){\n        bones.push(phrase)\n      }\n    });\n    console.log(bones)\n    return bones\n}\n\nconst createLinks = (inputText, onClick) => {\n  let textLines = inputText.split('.');\n  let keyPhrases = filterKeyPhrases()\n\n  console.log(textLines)\n  \n  return textLines.map((line) => {\n    let keyWord = \"\" \n    keyPhrases.forEach((key) => {\n      if(line.includes(key)) {\n        keyWord = key\n      } \n    })\n    \n    return (<p className={keyWord !== \"\" ? \"textLine isLink\" : \"textLine\"} onClick={() => onClick(keyWord)}>{line+'.'}</p>)\n    }\n  )\n}\n\nfunction App() {\n  const [activeSelection, setActiveSelection] = useState(\"\");\n  const [userText, setUserText] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(0);\n  const [textToAnylize, setTextToAnylize] = useState(null);\n  const [PhraseDescription, setPhraseDescription] = useState(null);\n  const keyWords = [\"T12\", \"L1\", \"L3\", \"L4\", \"L5\"]\n\n\n  const sources = {\n      \"L1-L3\": {\n        description:\"It can be treated by a medical professional with steroids, but you can also improve your situation by avoiding heavy lifting and intense back movement.\",\n        select:\"L1\",\n        src:\"https://cdn.glitch.com/423fd5dd-e15b-4d06-b8a2-e0895d14b533%2Fspine_l1-l3.glb?v=1616277772039\"},\n      \"L3-L4\": {\n        description: \"Facet athrosis means that the joints between the bones is degenerating. It can be treated by a medical professional with steroids, but you can also improve your situation by avoiding heavy lifting and intense back movement.\",\n        select:\"L3\",\n        src:\"https://cdn.glitch.com/423fd5dd-e15b-4d06-b8a2-e0895d14b533%2Fspine_l1-l3.glb?v=1616277772039\"\n      },\n      \"L1\": {\n        description: \"Medical professional with steroids, but you can also improve your situation by avoiding heavy lifting and intense back movement.\",\n        select:\"L1\",\n        src:\"https://cdn.glitch.com/423fd5dd-e15b-4d06-b8a2-e0895d14b533%2Fspine_l1.glb?v=1616277772481\"\n      },\n      \"L4-L5\": {\n        description: \"Spinal disc herniation is an injury to the cushioning and connective tissue between vertebrae, usually caused by excessive strain or trauma to the spine. It can be a serious condition, but most cases do not need surgery. Massage and other physical therapy might help.\",\n        select:\"L4\",\n        src:\"https://cdn.glitch.com/423fd5dd-e15b-4d06-b8a2-e0895d14b533%2Fspine_l4-l5.glb?v=1616277772610\"\n      },\n      \"T12-L1\": {\n        description: \"Improve your situation by avoiding heavy lifting and intense back movement.\",\n        select:\"T12\",\n        src:\"https://cdn.glitch.com/423fd5dd-e15b-4d06-b8a2-e0895d14b533%2Fspine_t12-l1.glb?v=1616277772949\"\n      },\n      \"L5-S1\": {\n        select:\"L5\",\n        src:\"https://cdn.glitch.com/423fd5dd-e15b-4d06-b8a2-e0895d14b533%2Fspine_l5-s1.glb?v=1616277772984\"\n      }\n    }\n  const [keyPhrases, setKeyPhrases] = useState(filterKeyPhrases());\n  const [source, setSource] = useState(orginalSrc);\n\n  const callApi = async () => {\n    const result = await getData()\n    const keyPhrases = result?.documents[0].keyPhrases\n    console.log(result)\n    console.log(keyPhrases)\n    if(keyPhrases){\n      filterKeyPhrases(keyPhrases)\n      setKeyPhrases(keyPhrases)\n    }\n  }\n\n  const updateSelection = (selection) => {\n    // get data\n\n    setActiveSelection(sources[selection]?.select)\n    setSource(sources[selection]?.src ?? orginalSrc)\n    setPhraseDescription(sources[selection]?.description)\n  }\n\n  useEffect(() => {\n    document.title = `scan.ly`;\n    // callApi()\n    // setUserText(createLinks(inputText))\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {currentPage === 0 ?\n      <InputBlock\n        onClick={() => setCurrentPage(1)}\n        setTextToAnylize={(t) => setTextToAnylize(t)}\n      />\n      :\n      <div className=\"contentWrapper\">\n          <div className= \"rowItem\">\n            <h2>Your MRI Report </h2>\n            {createLinks(inputText, updateSelection)}\n          </div>\n          <div className= \"rowItem\">\n              <model-viewer ar ar-modes=\"webxr\" src={source} camera-controls auto-rotate style={{height: \"500px\", width: \"500px\"}} >\n                  <HotSpots selection={activeSelection}></HotSpots>\n              </model-viewer>\n              {PhraseDescription && <div className=\"tipBox\"><p>What it means:</p><p>{PhraseDescription}</p><p>(UMLS C0009044)</p></div>}\n\n            </div>\n        </div>\n  }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}